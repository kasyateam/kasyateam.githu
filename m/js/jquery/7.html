<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
  <link rel="stylesheet" type="text/css" href="https://kasyateam.ga/m/kmp/style-1.css"/>
</head>

<body>
  <div class="main" id="main"><!-- ПОЧАТОК -->

<h1 id="title">
Создание AJAX запросов в jQuery
</h1>

<p>С помощью JavaScript Вы можете создавать асинхронные запросы и отправлять их на сервер.</p>
<p>Использование асинхронных запросов позволяет значительно ускорить загрузку страниц, так как в этом случае обновляться будет только та часть страницы, которая содержит новые данные, а не страница целиком.</p>
<p>Техника использования асинхронных запросов называется AJAX - Asynchronous JavaScript And XML (Асинхронный JavaScript и XML).</p>
<p>Создание AJAX запросов на "чистом" JavaScript имеет несколько недостатков:</p>
<p>- Код даже самого простого AJAX запроса получается достаточно громоздким и сложным для понимания без специального ознакомления.</p>
<p>- Необходимо добавлять дополнительный код для поддержки старых версий браузеров.</p>
<p>AJAX запрос созданный с помощью jQuery занимает всего одну строчку кода, и уже оптимизирован для использования и с новыми и старыми версиями браузеров.</p>
<p>Синтаксис:</p>

<pre class="brush: csharp;">
$("селектор").load(url,данные,функция)
</pre>

<p><b>селектор</b> выбирает элемент, в котором будет отображен результат запроса.</p>
<p><b>url адрес</b> - адрес файла, который будет запрошен у сервера с помощью AJAX.</p>
<p><b>данные</b> - данные, которые будут переданы запрошенному файлу. Если Вы хотите запросить файл, при этом не передавать никаких данных, оставьте данный параметр пустым.</p>
<p><b>функция</b> - имя функции, которая будет вызвана после выполнения запроса.</p>

<p>Теперь приведем пример запроса, который пересылает данные.</p>
<p>В примере ниже мы пересылаем скрипту add.php переменную x со значением 4 и переменную y со значением 5 скрипт в свою очередь принимает эти переменные, производит их сложение и отправляет результат обратно.</p>

<pre class="brush: csharp;">
$(document).ready(function()
{
$("#but1").click(function()
{
$("#par1").load("add.php","x=4&y=5");
})
});
</pre>

<h1 id="title">
Сопровождающие функции
</h1>

<p>Сопровождающие функции позволяют выполнять различный код в зависимости от состояния выполнения AJAX запроса.</p>
<p>Метод <b>ajaxSend()</b> выполняет переданный в него код во время отправления AJAX запроса.</p>
<p>Метод <b>ajaxComplete</b> выполняет переданный в него код после завершения выполнения AJAX запроса (при этом неважно произошла ошибка или нет).</p>

<p>Пример:</p>

<pre class="brush: csharp;">
$(document).ready(function()
{
$("#par1").ajaxSend(function()
{
$("#img1").css("display","block");
})

$("#par1").ajaxComplete(function()
{
$("#img1").css("display","none");
})

$("#but1").click(function()
{
$("#par1").load("add.php","x=10&y=100");
})
});
</pre>

<p>Метод <b>ajaxSuccess</b> выполняет переданный в него код, если выполнение AJAX запроса завершается успешно.</p>
<p>Метод <b>ajaxError</b> выполняет переданный в него код, если выполнение AJAX запроса завершается с ошибкой.</p>

<pre class="brush: csharp;">
$(document).ready(function()
{
$("#par1").ajaxSend(function()
{
$("#img1").css("display","block");
});

$("#par1").ajaxComplete(function()
{
$("#img1").css("display","none");
});

$("#par1").ajaxError(function()
{
alert("Выполнение AJAX запроса не завершено.\nПопробуйте отправить его еще раз.");
});

$("#par1").ajaxSuccess(function()
{
alert("AJAX запрос успешно выполнен!");
});

$("#but1").click(function()
{
$("#par1").load("add.php","x=10&y=100");
});

$("#but2").click(function()
{
$("#par1").load("abb.php","x=10&y=100");
});
});
</pre>

<p>Методы <b>ajaxStart</b> и <b>ajaxStop</b> используются для сопровождения группы AJAX запросов.</p>
<p>Метод <b>ajaxStart</b> выполняет переданный в него код при отправлении первого запроса из группы.</p>
<p>Метод <b>ajaxStop</b> выполняет переданный в него код при завершении последнего запроса из группы.</p>

<pre class="brush: csharp;">
$(document).ready(function()
{
$("#par1").ajaxStart(function()
{
$("#wrap").css("display","block");
});

$("#par1").ajaxStop(function()
{
$("#wrap").css("display","none");
});

$("#but1").click(function()
{
$("#par1").load("add.php","x=5&=10");
$("#par1").load("add.php","x=10&y=100");
$("#par1").load("testfile.txt");
$("#par1").load("add.php","x=45&y=32");
});
});
</pre>

<h1 id="title">
Низкоуровневые AJAX запросы
</h1>

<p>Высокоуровневые методы создания AJAX запросов (т.е. методы которые были разобраны ранее в данной главе) подходят для создания большей части запросов, но иногда их функциональности становится недостаточно.</p>
<p>Низкоуровневые AJAX запросы предоставляют более широкую функциональность, но более сложны в использовании.</p>
<p>Синтаксис высокоуровневого AJAX запроса:</p>

<pre class="brush: csharp;">
$("#par1").load("add.php","x=4&y=5")
</pre>

<p>Синтаксис аналогичного низкоуровневого AJAX запроса:</p>

<pre class="brush: csharp;">
$("#but1").click(function()
{
$.ajax({url:"add.php",
data:"x=4&y=5",
success:function(result)
{$("#par1").html(result)}
});
});
</pre>
</body>
</html>

