<!DOCTYPE html><html lang="ru"><head>  <meta charset="utf-8" />  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />  <link rel="stylesheet" href="/style-1.css"></head><body>  <div class="main" id="main">    <div class="header">      <p class="header-text">HTML5</p>      <a href="#" class="header-info">HTML5 Web worker</a>    </div> <h1 id="title">Знакомство с web worker</h1><p><b>Обратите внимание:</b> IE10+, Chrome, Firefox, Opera и Safari имеют поддержку данной технологии.</p><p>В HTML все JavaScript скрипты на странице могли выполняться только поочередно.</p><p>В некоторых случаях пользователи должны были ожидать завершения выполнения скрипта пока они смогут продолжить взаимодействие с веб-страницами.</p><p>Благодаря технологии web worker в HTML5 стало возможным создание скриптов, которые будут выполняться в фоновом режиме и не будут влиять на скорость загрузки основной страницы.</p><h1>Создание web worker</h1><p>Так как web worker работают параллельно с основной страницей их код всегда должен быть вынесен в отдельный .js файл.</p><p>После этого на нашей основной странице необходимо создать новый объект Worker с ссылкой на внешний файл скрипта:</p><pre>var worker = new Worker(ссылка_на_файл_скрипта);</pre><p>Если указанный файл существует браузер начнет загрузку скрипта новым потоком асинхронно.</p><p>После того, как скрипт будет загружен мы можем запустить наш worker с помощью:</p><pre>worker.postMessage();</pre><h1>Взаимодействие с web worker</h1><p>Взаимодействие web worker с основной веб-страницей происходит с помощью специальных событий и метода <b>postMessage()</b>.</p><p>Например событие message срабатывает, когда worker получает какое-либо сообщение.</p><p>Всегда имейте ввиду что web worker не имеют доступа к:</p><p>- DOM структуре основной страницы</p><p>- Объекту window</p><p>- Объекту document</p><p>- Объекту parent</p><p><b>Обратите внимание:</b> помимо текстовых строк мы можем передавать в worker JSON объекты. Узнать о JSON объектах больше Вы можете здесь.</p><p><b>Обратите внимание:</b> не следует применять web worker для таких простых задач как в примере.</p><p>Обычно использование web worker оправдано только для задач, которые требуют значительных ресурсов компьютера для их выполнения, например кэширование больших массивов с данными для дальнейшего использование, проверка текста на ошибки, подсветка синтаксиса или другие операции с форматированием текста в реальном времени, обновление больших объемов информации в базах данных, анализирование видео или аудио файлов и др.</p><h1>Выключение web worker</h1><p>После того, как <b>worker</b> был создан он будет ожидать сообщения от основной страницы даже когда выполнение его кода завершится, поэтому Вы всегда должны явно завершать работу worker когда он больше не нужен.</p><p>Чтобы завершить работу worker и освободить ресурсы компьютера Вы должны использовать метод <b>termitane()</b>:</p><pre>worker.terminate();</pre><h1>Использование web worker в старых браузерах</h1><p>Прежде чем использовать web worker необходимо проверить поддерживает ли эту технологию браузер пользователя.</p><p>Это можно сделать с помощью следующей конструкции:</p><pre>if( typeof(Worker) !== "undefined" ){//Браузер пользователя имеет поддержку web worker}else{//Браузер пользователя не поддерживает web worker}</pre></body></html>